!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.ventana=t()}}(function(){return function t(e,n,r){function i(u,s){if(!n[u]){if(!e[u]){var a="function"==typeof require&&require;if(!s&&a)return a(u,!0);if(o)return o(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var c=n[u]={exports:{}};e[u][0].call(c.exports,function(t){var n=e[u][1][t];return i(n?n:t)},c,c.exports,t,e,n,r)}return n[u].exports}for(var o="function"==typeof require&&require,u=0;u<r.length;u++)i(r[u]);return i}({1:[function(t,e,n){"use strict";function r(t){return function(){var e=h[t],n=e.length,r=0;for(r=0;r<n;r++)e[r].call(null)}}function i(t,e){h[t].push(e)}function o(t){m.push(t)}var u=t("./window-proxy"),s=t("./streams/streams");n.RAFStream=s.raf;var a=t("./queues/element");n.QueueElement=a["default"];var f=t("./streams/frame");n.Frame=f["default"];var c=t("./queues/raf-queue");n.RAFQueue=c["default"];var l=t("./queues/queue");n.Queue=l["default"];var p=t("./streams/stream");n.Stream=p["default"];var d=t("./streams/stream");n.stream=d.stream;var h={move:[],resize:[],destroy:[],hide:[],show:[]};s.scroll.pipe(function(t){h.move.forEach(function(e){e.call(null,t)})}),s.resize.pipe(function(t){h.resize.forEach(function(e){e.call(null,t)})}),u["default"].hasDOM&&(window.addEventListener("unload",r("destroy")),document.addEventListener("visibilitychange",function(){"visible"===document.visibilityState?r("show")():r("hide")()}));var m=[];s.poll.pipe(function(t){for(;m.length>0;)m.pop().call(null,t)}),n.on=i,n.queue=o},{"./queues/element":3,"./queues/queue":4,"./queues/raf-queue":5,"./streams/frame":6,"./streams/stream":7,"./streams/streams":8,"./window-proxy":9}],2:[function(t,e,n){"use strict";!function(t){t[t.MEASURE=0]="MEASURE",t[t.MUTATE=1]="MUTATE"}(n.RAFPhase||(n.RAFPhase={}));n.RAFPhase},{}],3:[function(t,e,n){"use strict";var r=function(){function t(){}return t}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r},{}],4:[function(t,e,n){"use strict";var r=t("../streams/stream"),i=function(){function t(t,e){this.name=t,this.items=[],this.collect=e,this.stream=new r["default"](t+" output stream")}return t.prototype.remove=function(t){var e;e="string"==typeof t?function(e){return e.id===t}:function(e){return e.el===t};for(var n=this.items.length,r=0;r<n;r++)e(this.items[r])&&(this.items.splice(r,1),r--,n--)},t.prototype.callOnPopulate=function(t){this.items.length>0?t.call(this):this.populateCallbacks.push(t)},t.prototype.clear=function(){this.items=[]},t.prototype.push=function(t){for(this.items.push(t);this.populateCallbacks.length>0;)this.populateCallbacks.pop().call(this)},t.prototype.toStream=function(){return this.stream},t.prototype.tap=function(t){var e=this;this.items.map(function(n){return e.intercept(t,n)?n:e.collect(e.stream.write.bind(e.stream),t,n)})},t.prototype.intercept=function(t,e){return!1},t}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=i},{"../streams/stream":7}],5:[function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=t("./queue"),o=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype.intercept=function(t,e){return!!t.isMeasure()&&(e.bcr=e.el.getBoundingClientRect(),!0)},e}(i["default"]);Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o},{"./queue":4}],6:[function(t,e,n){"use strict";var r=t("./../interfaces"),i=function(){function t(){}return t.prototype.isMeasure=function(){return this.phase===r.RAFPhase.MEASURE},t}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=i},{"./../interfaces":2}],7:[function(t,e,n){"use strict";function r(t){return"function"==typeof t?new o(t):t instanceof o?t:void 0}function i(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return t[0]=t[0]||new o,t.length>1?o.join.apply(null,t.map(r)):t[0]}var o=function(){function t(t){var e=this;this.instanceInit=function(){},this.initCalled=!1,this.name="anonymous","function"==typeof t?this.instanceInit=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];e.write.apply(e,t)}:"string"==typeof t&&(this.name=t),this.targets=[]}return t.prototype.init=function(){this.initCalled||(this.initCalled=!0,this.onInit.call(this))},t.prototype.onInit=function(){this.instanceInit()},t.prototype.write=function(e){this.targets.forEach(function(n,r){n.endpoint instanceof t?n.stream.write(e):"function"==typeof n.endpoint?n.stream.write(n.endpoint(e)):"function"==typeof n.endpoint.tap&&n.endpoint.tap(e)})},t.prototype.pipe=function(e){var n=this;if(e instanceof t)return this.targets.push({stream:e,endpoint:e}),e;if(e instanceof Function){var r=new t;return this.targets.push({endpoint:function(t){r.write(e(t))},stream:r}),this.init(),r}var i=e.toStream();return this.targets.push({stream:i,endpoint:e}),e.callOnPopulate(function(){n.init()}),i},t.join=function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];var r=new Array(e.length);return new t(function(t){var n=this;e.forEach(function(t,e){t.pipe(function(t){r[e]=t,n.write(r)})})})},t.prototype.filter=function(e,n){var r=this,i="function"!=typeof e&&e,o=!!i,u=o?n:e;return new t(function(t){r.pipe(function(e){var n=o?u(i,e):u(e);n&&t(n)})})},t}();n.Stream=o,n.stream=i,Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o},{}],8:[function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=t("./stream"),o=t("./../window-proxy"),u=t("./frame"),s=t("./../interfaces"),a=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype.onInit=function(){var e=this,n=function(){e.write(Date.now()),o["default"].rAF(n)};o["default"].rAF(n),t.prototype.onInit.call(this)},e.prototype.write=function(e){var n=new u["default"];n.timestamp=e,n.phase=s.RAFPhase.MEASURE,n.scrollTop=o["default"].getScrollTop(),n.scrollLeft=o["default"].getScrollLeft(),n.width=o["default"].getWidth(),n.height=o["default"].getHeight(),t.prototype.write.call(this,n),n.phase=s.RAFPhase.MUTATE,t.prototype.write.call(this,n)},e}(i["default"]);n.RAFStream=a;var f=new a("requestAnimationFrame");n.raf=f;var c=f.filter(function(t){if(t.phase===s.RAFPhase.MEASURE)return t});n.measure=c;var l=f.filter(function(t){if(t.phase!==s.RAFPhase.MEASURE)return t});n.poll=l;var p=-1,d=-1,h=c.filter(function(t){var e=t.height,n=t.width;if(n!==p||e!==d)return d=e,p=n,{width:p,height:d}});n.resize=h;var m=-1,v=-1,y=c.filter(function(t){var e=t.scrollTop,n=t.scrollLeft;if(t.phase===s.RAFPhase.MEASURE&&(e!==m||n!==v))return m=e,v=n,{timestamp:t.timestamp,scrollTop:m,scrollLeft:v}});n.scroll=y},{"./../interfaces":2,"./../window-proxy":9,"./frame":6,"./stream":7}],9:[function(t,e,n){"use strict";function r(){var t="undefined"!=typeof document.scrollingElement;u.getScrollTop=t?function(){return document.scrollingElement.scrollTop}:function(){return window.scrollY},u.getScrollLeft=t?function(){return document.scrollingElement.scrollLeft}:function(){return window.scrollX},u.getHeight=function(){return window.innerHeight},u.getWidth=function(){return window.innerWidth}}var i=function(){return 0},o=!("undefined"==typeof window||!window||"undefined"==typeof document||!document),u={hasDOM:o,getScrollTop:i,getScrollLeft:i,getHeight:i,getWidth:i,rAF:o&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(){}};o&&("loading"!==document.readyState?r():document.addEventListener("DOMContentLoaded",r)),Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=u},{}]},{},[1])(1)});