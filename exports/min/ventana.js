!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.ventana=e()}}(function(){return function e(t,n,r){function i(s,u){if(!n[s]){if(!t[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(o)return o(s,!0);var f=new Error("Cannot find module '"+s+"'");throw f.code="MODULE_NOT_FOUND",f}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){"use strict";function r(e){return function(){var t=d[e],n=t.length,r=0;for(r=0;r<n;r++)t[r].call(null)}}function i(e,t){d[e].push(t)}function o(e){h.push(e)}var s=e("./window-proxy"),u=e("./streams/streams");n.RAFStream=u.raf;var a=e("./queues/element");n.QueueElement=a["default"];var f=e("./streams/frame");n.Frame=f["default"];var c=e("./queues/queue");n.Queue=c["default"];var l=e("./streams/stream"),p=e("./streams/stream");n.Stream=p["default"];var d={move:[],resize:[],destroy:[],hide:[],show:[]};u.scroll.pipe(new l.Terminal(function(e){d.move.forEach(function(t){t.call(null,e)})})),u.resize.pipe(new l.Terminal(function(e){d.resize.forEach(function(t){t.call(null,e)})})),s["default"].hasDOM&&(window.addEventListener("unload",r("destroy")),document.addEventListener("visibilitychange",function(){"visible"===document.visibilityState?r("show")():r("hide")()}));var h=[];u.poll.pipe(new l.Terminal(function(e){for(;h.length>0;)h.pop().call(null,e)})),n.on=i,n.queue=o},{"./queues/element":3,"./queues/queue":4,"./streams/frame":5,"./streams/stream":6,"./streams/streams":7,"./window-proxy":8}],2:[function(e,t,n){"use strict";!function(e){e[e.MEASURE=0]="MEASURE",e[e.MUTATE=1]="MUTATE"}(n.RAFPhase||(n.RAFPhase={}));n.RAFPhase},{}],3:[function(e,t,n){"use strict";var r=function(){function e(){}return e}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r},{}],4:[function(e,t,n){"use strict";var r=e("../streams/stream"),i=function(){function e(e){this.name=e,this.items=[],this.stream=new r["default"]}return e.prototype.remove=function(e){var t;t="string"==typeof e?function(t){return t.id===e}:function(t){return t.el===e};for(var n=this.items.length,r=0;r<n;r++)t(this.items[r])&&(this.items.splice(r,1),r--,n--)},e.prototype.clear=function(){this.items=[]},e.prototype.push=function(e){this.items.push(e)},e.prototype.toStream=function(){return this.stream},e}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=i},{"../streams/stream":6}],5:[function(e,t,n){"use strict";var r=e("./../interfaces"),i=function(){function e(){}return e.prototype.isMeasure=function(){return this.phase===r.RAFPhase.MEASURE},e}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=i},{"./../interfaces":2}],6:[function(e,t,n){"use strict";var r=function(){function e(e){void 0===e&&(e={}),this.targets=[],this.options=e,this._process=e.process||function(e){return e},e.init&&e.init.call(this)}return e.prototype.process=function(e,t){return this._process.call(this,e,t)},e.prototype.write=function(e){var t=this;e=this.process?this.process(e):e,e&&(this.options.queue?this.options.queue.items.forEach(function(n){t.targets.forEach(function(r){r.write(t.process(e,n))})}):this.targets.forEach(function(n){n.write(t.process(e))}))},e.prototype.pipe=function(e){return this.targets.push(e),e},e}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r;var i=function(){function e(e){this.targets=[],this.terminal=e}return e.prototype.write=function(e){var t=this.terminal(e);this.targets.forEach(function(e){e.write(t)})},e.prototype.pipe=function(e){return this.targets.push(e),e},e}();n.Terminal=i},{}],7:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("./stream"),o=e("./../window-proxy"),s=e("./frame"),u=e("./../interfaces"),a=(function(e){function t(){e.apply(this,arguments)}return r(t,e),t.prototype.write=function(t){var n=new s["default"];n.timestamp=t,n.phase=u.RAFPhase.MEASURE,n.scrollTop=o["default"].getScrollTop(),n.scrollLeft=o["default"].getScrollLeft(),n.width=o["default"].getWidth(),n.height=o["default"].getHeight(),e.prototype.write.call(this,n),n.phase=u.RAFPhase.MUTATE,e.prototype.write.call(this,n)},t}(i["default"]),new i["default"]({init:function(){var e=this,t=function(){e.write(Date.now()),o["default"].rAF(t)};o["default"].rAF(t)},process:function(e){if("number"==typeof e){var t=new s["default"];return t.timestamp=e,t.phase=u.RAFPhase.MEASURE,t.scrollTop=o["default"].getScrollTop(),t.scrollLeft=o["default"].getScrollLeft(),t.width=o["default"].getWidth(),t.height=o["default"].getHeight(),this.write(t),t.phase=u.RAFPhase.MUTATE,t}return e}}));n.raf=a;var f=a.pipe(new i["default"]({process:function(e){if(e.phase===u.RAFPhase.MEASURE)return e}}));n.measure=f;var c=a.pipe(new i["default"]({process:function(e){if(e.phase!==u.RAFPhase.MEASURE)return e}}));n.poll=c;var l=-1,p=-1,d=f.pipe(new i["default"]({process:function(e){var t=e.height,n=e.width;if(n!==l||t!==p)return p=t,l=n,{width:l,height:p}}}));n.resize=d;var h=-1,m=-1,w=f.pipe(new i["default"]({process:function(e){var t=e.scrollTop,n=e.scrollLeft;if(e.phase===u.RAFPhase.MEASURE&&(t!==h||n!==m))return h=t,m=n,{timestamp:e.timestamp,scrollTop:h,scrollLeft:m}}}));n.scroll=w},{"./../interfaces":2,"./../window-proxy":8,"./frame":5,"./stream":6}],8:[function(e,t,n){"use strict";function r(){var e="undefined"!=typeof document.scrollingElement;s.getScrollTop=e?function(){return document.scrollingElement.scrollTop}:function(){return window.scrollY},s.getScrollLeft=e?function(){return document.scrollingElement.scrollLeft}:function(){return window.scrollX},s.getHeight=function(){return window.innerHeight},s.getWidth=function(){return window.innerWidth}}var i=function(){return 0},o=!("undefined"==typeof window||!window||"undefined"==typeof document||!document),s={hasDOM:o,getScrollTop:i,getScrollLeft:i,getHeight:i,getWidth:i,rAF:o&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(){}};o&&("loading"!==document.readyState?r():document.addEventListener("DOMContentLoaded",r)),Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=s},{}]},{},[1])(1)});