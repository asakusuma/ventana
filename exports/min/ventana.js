!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.ventana=e()}}(function(){return function e(t,n,r){function i(u,s){if(!n[u]){if(!t[u]){var f="function"==typeof require&&require;if(!s&&f)return f(u,!0);if(o)return o(u,!0);var a=new Error("Cannot find module '"+u+"'");throw a.code="MODULE_NOT_FOUND",a}var c=n[u]={exports:{}};t[u][0].call(c.exports,function(e){var n=t[u][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[u].exports}for(var o="function"==typeof require&&require,u=0;u<r.length;u++)i(r[u]);return i}({1:[function(e,t,n){"use strict";function r(e){return function(){var t=m[e],n=t.length,r=0;for(r=0;r<n;r++)t[r].call(null)}}function i(e,t){m[e].push(t)}function o(e){E.push(e)}function u(e){var t={top:e.top+w,left:e.left+v,width:e.width,height:e.height};return t}function s(e){return e=e||{top:0,left:0,right:0,bottom:0},{top:w+e.top,left:v+e.left,height:y-e.top-e.bottom,width:g-e.left-e.right}}var f=e("./window-proxy"),a=e("./streams/streams");n.RAFStream=a.raf;var c=e("./queues/element");n.QueueElement=c["default"];var l=e("./streams/frame");n.Frame=l["default"];var p=e("./queues/queue");n.Queue=p["default"];var d=e("./streams/stream"),h=e("./streams/stream");n.Stream=h["default"];var m={move:[],resize:[],destroy:[],hide:[],show:[]};a.scroll.pipe(new d.Terminal(function(e){m.move.forEach(function(t){t.call(null,e)})})),a.resize.pipe(new d.Terminal(function(e){m.resize.forEach(function(t){t.call(null,e)})})),f["default"].hasDOM&&(window.addEventListener("unload",r("destroy")),document.addEventListener("visibilitychange",function(){"visible"===document.visibilityState?r("show")():r("hide")()}));var w=0,v=0,g=0,y=0,E=[];a.poll.pipe(new d.Terminal(function(e){for(w=e.scrollTop,v=e.scrollLeft,g=e.width,y=e.height;E.length>0;)E.pop().call(null,e)})),n.on=i,n.queue=o,n.mapBoundingRectToAbsolute=u,n.getWindowRect=s},{"./queues/element":3,"./queues/queue":4,"./streams/frame":5,"./streams/stream":6,"./streams/streams":7,"./window-proxy":8}],2:[function(e,t,n){"use strict";!function(e){e[e.MEASURE=0]="MEASURE",e[e.MUTATE=1]="MUTATE"}(n.RAFPhase||(n.RAFPhase={}));n.RAFPhase},{}],3:[function(e,t,n){"use strict";var r=function(){function e(){}return e}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r},{}],4:[function(e,t,n){"use strict";var r=e("../streams/stream"),i=function(){function e(e){this.name=e,this.items=[],this.stream=new r["default"]}return e.prototype.remove=function(e){var t;t="string"==typeof e?function(t){return t.id===e}:function(t){return t.el===e};for(var n=this.items.length,r=0;r<n;r++)t(this.items[r])&&(this.items.splice(r,1),r--,n--)},e.prototype.clear=function(){this.items=[]},e.prototype.push=function(e){this.items.push(e)},e.prototype.toStream=function(){return this.stream},e}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=i},{"../streams/stream":6}],5:[function(e,t,n){"use strict";var r=e("./../interfaces"),i=function(){function e(){}return e.prototype.isMeasure=function(){return this.phase===r.RAFPhase.MEASURE},e}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=i},{"./../interfaces":2}],6:[function(e,t,n){"use strict";var r=function(){function e(e){void 0===e&&(e={}),this.options=e,this.process=e.process||function(e){return e},e.init&&e.init()}return e.prototype.write=function(e){var t=this;e=this.options.process?this.options.process(e):e,e!==!1&&(this.options.queue?this.options.queue.items.forEach(function(n){t.targets.forEach(function(r){r.write(t.process(e,n))})}):this.targets.forEach(function(n){n.write(t.process(e))}))},e.prototype.pipe=function(e){return this.targets.push(e),e},e}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r;var i=function(){function e(e){this.targets=[],this.terminal=e}return e.prototype.write=function(e){var t=this.terminal(e);this.targets.forEach(function(e){e.write(t)})},e.prototype.pipe=function(e){return this.targets.push(e),e},e}();n.Terminal=i},{}],7:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("./stream"),o=e("./../window-proxy"),u=e("./frame"),s=e("./../interfaces"),f=(function(e){function t(){e.apply(this,arguments)}return r(t,e),t.prototype.write=function(t){var n=new u["default"];n.timestamp=t,n.phase=s.RAFPhase.MEASURE,n.scrollTop=o["default"].getScrollTop(),n.scrollLeft=o["default"].getScrollLeft(),n.width=o["default"].getWidth(),n.height=o["default"].getHeight(),e.prototype.write.call(this,n),n.phase=s.RAFPhase.MUTATE,e.prototype.write.call(this,n)},t}(i["default"]),new i["default"]({init:function(){var e=this,t=function(){e.write(Date.now()),o["default"].rAF(t)};o["default"].rAF(t)}}));n.raf=f;var a=f.pipe(new i["default"]({process:function(e){if(e.phase===s.RAFPhase.MEASURE)return e}}));n.measure=a;var c=f.pipe(new i["default"]({process:function(e){if(e.phase!==s.RAFPhase.MEASURE)return e}}));n.poll=c;var l=-1,p=-1,d=a.pipe(new i["default"]({process:function(e){var t=e.height,n=e.width;if(n!==l||t!==p)return p=t,l=n,{width:l,height:p}}}));n.resize=d;var h=-1,m=-1,w=a.pipe(new i["default"]({process:function(e){var t=e.scrollTop,n=e.scrollLeft;if(e.phase===s.RAFPhase.MEASURE&&(t!==h||n!==m))return h=t,m=n,{timestamp:e.timestamp,scrollTop:h,scrollLeft:m}}}));n.scroll=w},{"./../interfaces":2,"./../window-proxy":8,"./frame":5,"./stream":6}],8:[function(e,t,n){"use strict";function r(){var e="undefined"!=typeof document.scrollingElement;u.getScrollTop=e?function(){return document.scrollingElement.scrollTop}:function(){return window.scrollY},u.getScrollLeft=e?function(){return document.scrollingElement.scrollLeft}:function(){return window.scrollX},u.getHeight=function(){return window.innerHeight},u.getWidth=function(){return window.innerWidth}}var i=function(){return 0},o=!("undefined"==typeof window||!window||"undefined"==typeof document||!document),u={hasDOM:o,getScrollTop:i,getScrollLeft:i,getHeight:i,getWidth:i,rAF:o&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(){}};o&&("loading"!==document.readyState?r():document.addEventListener("DOMContentLoaded",r)),Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=u},{}]},{},[1])(1)});