!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.ventana=t()}}(function(){return function t(e,n,r){function o(u,a){if(!n[u]){if(!e[u]){var s="function"==typeof require&&require;if(!a&&s)return s(u,!0);if(i)return i(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var c=n[u]={exports:{}};e[u][0].call(c.exports,function(t){var n=e[u][1][t];return o(n?n:t)},c,c.exports,t,e,n,r)}return n[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(t,e,n){"use strict";function r(t){return function(){var e=m[t],n=e.length,r=0;for(r=0;r<n;r++)e[r].call(null)}}function o(t,e){m[t].push(e)}function i(t){E.push(t)}function u(t){var e={top:t.top+w,left:t.left+v,width:t.width,height:t.height};return e}function a(t){return t=t||{top:0,left:0,right:0,bottom:0},{top:w+t.top,left:v+t.left,height:g-t.top-t.bottom,width:y-t.left-t.right}}var s=t("./window-proxy"),f=t("./streams/streams");n.RAFStream=f.raf;var c=t("./queues/element");n.QueueElement=c["default"];var l=t("./streams/frame");n.Frame=l["default"];var p=t("./queues/raf-queue");n.RAFQueue=p["default"];var d=t("./streams/stream");n.Stream=d["default"];var h=t("./streams/stream");n.stream=h.stream;var m={move:[],resize:[],destroy:[],hide:[],show:[]};f.scroll.pipe(function(t){m.move.forEach(function(e){e.call(null,t)})}),f.resize.pipe(function(t){m.resize.forEach(function(e){e.call(null,t)})}),s["default"].hasDOM&&(window.addEventListener("unload",r("destroy")),document.addEventListener("visibilitychange",function(){"visible"===document.visibilityState?r("show")():r("hide")()}));var w=0,v=0,y=0,g=0,E=[];f.poll.pipe(function(t){for(w=t.scrollTop,v=t.scrollLeft,y=t.width,g=t.height;E.length>0;)E.pop().call(null,t)}),n.on=o,n.queue=i,n.mapBoundingRectToAbsolute=u,n.getWindowRect=a},{"./queues/element":3,"./queues/raf-queue":5,"./streams/frame":6,"./streams/stream":7,"./streams/streams":8,"./window-proxy":9}],2:[function(t,e,n){"use strict";!function(t){t[t.MEASURE=0]="MEASURE",t[t.MUTATE=1]="MUTATE"}(n.RAFPhase||(n.RAFPhase={}));n.RAFPhase},{}],3:[function(t,e,n){"use strict";var r=function(){function t(){}return t}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r},{}],4:[function(t,e,n){"use strict";var r=t("../streams/stream"),o=function(){function t(t,e){this.name=t,this.items=[],this.collect=e,this.stream=new r["default"](t+" output stream")}return t.prototype.push=function(t){this.items.push(t)},t.prototype.toStream=function(){return this.stream},t.prototype.tap=function(t){var e=this;this.items.map(function(n){return e.intercept(t,n)?n:e.collect(e.stream.write.bind(e.stream),t,n)})},t.prototype.intercept=function(t,e){return!1},t}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o},{"../streams/stream":7}],5:[function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=t("./queue"),i=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype.intercept=function(t,e){return!!t.isMeasure()&&(e.bcr=e.el.getBoundingClientRect(),!0)},e}(o["default"]);Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=i},{"./queue":4}],6:[function(t,e,n){"use strict";var r=t("./../interfaces"),o=function(){function t(){}return t.prototype.isMeasure=function(){return this.phase===r.RAFPhase.MEASURE},t}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o},{"./../interfaces":2}],7:[function(t,e,n){"use strict";function r(t){return"function"==typeof t?new i(t):t instanceof i?t:void 0}function o(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return t[0]=t[0]||new i,t.length>1?i.join.apply(null,t.map(r)):t[0]}var i=function(){function t(t){var e=this;this.name=name,"function"==typeof t?t.call(this,function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];e.write.apply(e,t)}):"string"==typeof t&&(this.name=t),this.targets=[],this.targetEndpoints=[]}return t.prototype.write=function(e){var n=this;this.targets.forEach(function(r,o){r instanceof t?r.write(e):"function"==typeof r?n.targetEndpoints[o].write(r(e)):"function"==typeof r.tap&&r.tap(e)})},t.prototype.pipe=function(e){if(this.targets.push(e),e instanceof t)return this.targetEndpoints.push(null),e;if(e instanceof Function){var n=new t;return this.targetEndpoints.push(n),n}return this.targetEndpoints.push(null),e.toStream()},t.join=function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];var r=new Array(e.length);return new t(function(t){var n=this;e.forEach(function(t,e){t.pipe(function(t){r[e]=t,n.write(r)})})})},t.prototype.filter=function(e,n){var r=this,o="function"!=typeof e&&e,i=!!o,u=i?n:e;return new t(function(t){r.pipe(function(e){var n=i?u(o,e):u(e);n&&t(n)})})},t}();n.Stream=i,n.stream=o,Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=i},{}],8:[function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=t("./stream"),i=t("./../window-proxy"),u=t("./frame"),a=t("./../interfaces"),s=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype.write=function(e){var n=new u["default"];n.timestamp=e,n.phase=a.RAFPhase.MEASURE,n.scrollTop=i["default"].getScrollTop(),n.scrollLeft=i["default"].getScrollLeft(),n.width=i["default"].getWidth(),n.height=i["default"].getHeight(),t.prototype.write.call(this,n),n.phase=a.RAFPhase.MUTATE,t.prototype.write.call(this,n)},e}(o["default"]);n.RAFStream=s;var f=new s("requestAnimationFrame");n.raf=f;var c=f.filter(function(t){if(t.phase===a.RAFPhase.MEASURE)return t});n.measure=c;var l=f.filter(function(t){if(t.phase!==a.RAFPhase.MEASURE)return t});n.poll=l;var p=function(){f.write(Date.now()),i["default"].rAF(p)};i["default"].rAF(p);var d=-1,h=-1,m=c.filter(function(t){var e=t.height,n=t.width;if(n!==d||e!==h)return h=e,d=n,{width:d,height:h}});n.resize=m;var w=-1,v=-1,y=c.filter(function(t){var e=t.scrollTop,n=t.scrollLeft;if(t.phase===a.RAFPhase.MEASURE&&(e!==w||n!==v))return w=e,v=n,{timestamp:t.timestamp,scrollTop:w,scrollLeft:v}});n.scroll=y},{"./../interfaces":2,"./../window-proxy":9,"./frame":6,"./stream":7}],9:[function(t,e,n){"use strict";function r(){var t="undefined"!=typeof document.scrollingElement;u.getScrollTop=t?function(){return document.scrollingElement.scrollTop}:function(){return window.scrollY},u.getScrollLeft=t?function(){return document.scrollingElement.scrollLeft}:function(){return window.scrollX},u.getHeight=function(){return window.innerHeight},u.getWidth=function(){return window.innerWidth}}var o=function(){return 0},i=!("undefined"==typeof window||!window||"undefined"==typeof document||!document),u={hasDOM:i,getScrollTop:o,getScrollLeft:o,getHeight:o,getWidth:o,rAF:i&&window.requestAnimationFrame.bind(window)};i&&("loading"!==document.readyState?r():document.addEventListener("DOMContentLoaded",r)),Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=u},{}]},{},[1])(1)});