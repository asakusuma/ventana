!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.ventana=e()}}(function(){return function e(t,n,i){function o(u,s){if(!n[u]){if(!t[u]){var a="function"==typeof require&&require;if(!s&&a)return a(u,!0);if(r)return r(u,!0);var l=new Error("Cannot find module '"+u+"'");throw l.code="MODULE_NOT_FOUND",l}var f=n[u]={exports:{}};t[u][0].call(f.exports,function(e){var n=t[u][1][e];return o(n?n:e)},f,f.exports,e,t,n,i)}return n[u].exports}for(var r="function"==typeof require&&require,u=0;u<i.length;u++)o(i[u]);return o}({1:[function(e,t,n){"use strict";function i(e,t){h[e].push({callback:t,id:null})}function o(e){v.push({callback:e,id:null})}var r=e("./window-proxy"),u=e("./streams/streams");n.RAFStream=u.raf;var s=e("./queues/element");n.QueueElement=s["default"];var a=e("./streams/frame");n.Frame=a["default"];var l=e("./queues/queue");n.Queue=l["default"];var f=e("./queues/queue"),c=e("./streams/stream"),p=e("./streams/stream");n.Stream=p["default"];var h={move:new f["default"]("move"),resize:new f["default"]("resize"),destroy:new f["default"]("destroy"),hide:new f["default"]("hide"),show:new f["default"]("show")},d=new c["default"],w=new c["default"],m=new c["default"],v=new f["default"]("tasks"),y=function(e,t){return t.callback},g=new c.Terminal(function(e){return e()});d.pipe(new c["default"]({queue:h.hide,process:y})).pipe(g),m.pipe(new c["default"]({queue:h.destroy,process:y})).pipe(g),w.pipe(new c["default"]({queue:h.show,process:y})).pipe(g),u.scroll.pipe(new c["default"]({queue:h.move,process:y})).pipe(g),u.resize.pipe(new c["default"]({queue:h.resize,process:y})).pipe(g),u.poll.pipe(new c["default"]({consume:!0,queue:v,process:y})).pipe(g),r["default"].hasDOM&&(window.addEventListener("unload",m.write),document.addEventListener("visibilitychange",function(){"visible"===document.visibilityState?w.write(Date.now()):d.write(Date.now())})),n.on=i,n.queue=o},{"./queues/element":3,"./queues/queue":4,"./streams/frame":5,"./streams/stream":6,"./streams/streams":7,"./window-proxy":8}],2:[function(e,t,n){"use strict";!function(e){e[e.MEASURE=0]="MEASURE",e[e.MUTATE=1]="MUTATE"}(n.RAFPhase||(n.RAFPhase={}));n.RAFPhase},{}],3:[function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=function(){function e(){}return e}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o;var r=function(e){function t(){e.apply(this,arguments)}return i(t,e),t}(o);n.QueueDOMElement=r},{}],4:[function(e,t,n){"use strict";var i=e("../streams/stream"),o=function(){function e(e){this.populateCallbacks=[],this.name=e,this.items=[],this.stream=new i["default"]}return e.prototype.remove=function(e){var t;t="string"==typeof e?function(t){return t.id===e}:function(t){return t.el===e};for(var n=this.items.length,i=0;i<n;i++)t(this.items[i])&&(this.items.splice(i,1),i--,n--)},e.prototype.clear=function(){this.items=[]},e.prototype.push=function(e){0===this.items.length&&this.populateCallbacks.forEach(function(e){return e()}),this.items.push(e)},e.prototype.toStream=function(){return this.stream},e.prototype.callOnPopulate=function(e){this.populateCallbacks.push(e)},e}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o},{"../streams/stream":6}],5:[function(e,t,n){"use strict";var i=e("./../interfaces"),o=function(){function e(){}return e.prototype.isMeasure=function(){return this.phase===i.RAFPhase.MEASURE},e}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o},{"./../interfaces":2}],6:[function(e,t,n){"use strict";var i=function(){function e(e){var t=this;void 0===e&&(e={}),this.targets=[],this.refCount=0,this.populateCallbacks=[],this.options=e,this._process=e.process||function(e){return e},e.queue&&e.queue.callOnPopulate(function(){t.onPopulate()})}return e.prototype.process=function(e,t){return this._process.call(this,e,t)},e.prototype.handleQueue=function(e,t){var n=this;this.targets.forEach(function(i){var o=n.process(e,t);o&&i.write(o)})},e.prototype.write=function(e){var t=this;if(this.options.queue)if(this.options.consume)for(;this.options.queue.items.length>0;)this.handleQueue(e,this.options.queue.items.pop());else this.options.queue.items.forEach(function(n){return t.handleQueue(e,n)});else(e=this.process(e))&&this.targets.forEach(function(t){t.write(e)})},e.prototype.onPopulate=function(){this.refCount<1&&this.options.init&&this.options.init.call(this),this.populateCallbacks.forEach(function(e){return e()}),this.refCount++},e.prototype.pipe=function(e){var t=this;return this.targets.push(e),this.options.queue||e.callOnPopulate(function(){t.onPopulate()}),e},e.prototype.callOnPopulate=function(e){this.populateCallbacks.push(e)},e}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=i;var o=function(){function e(e){this.targets=[],this.terminal=e}return e.prototype.write=function(e){var t=this.terminal(e);this.targets.forEach(function(e){e.write(t)})},e.prototype.pipe=function(e){return this.targets.push(e),e},e.prototype.callOnPopulate=function(e){e()},e}();n.Terminal=o},{}],7:[function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=e("./stream"),r=e("./../window-proxy"),u=e("./frame"),s=e("./../interfaces"),a=(function(e){function t(){e.apply(this,arguments)}return i(t,e),t.prototype.write=function(t){var n=new u["default"];n.timestamp=t,n.phase=s.RAFPhase.MEASURE,n.scrollTop=r["default"].getScrollTop(),n.scrollLeft=r["default"].getScrollLeft(),n.width=r["default"].getWidth(),n.height=r["default"].getHeight(),e.prototype.write.call(this,n),n.phase=s.RAFPhase.MUTATE,e.prototype.write.call(this,n)},t}(o["default"]),new o["default"]({init:function(){var e=this,t=function(){e.write(Date.now()),r["default"].rAF(t)};r["default"].rAF(t)},process:function(e){if("number"==typeof e){var t=new u["default"];return t.timestamp=e,t.phase=s.RAFPhase.MEASURE,t.scrollTop=r["default"].getScrollTop(),t.scrollLeft=r["default"].getScrollLeft(),t.width=r["default"].getWidth(),t.height=r["default"].getHeight(),this.write(t),t.phase=s.RAFPhase.MUTATE,t}return e}}));n.raf=a;var l=a.pipe(new o["default"]({process:function(e){if(e.phase===s.RAFPhase.MEASURE)return e}}));n.measure=l;var f=a.pipe(new o["default"]({process:function(e){if(e.phase!==s.RAFPhase.MEASURE)return e}}));n.poll=f;var c=l.pipe(new o["default"]({init:function(){this.w=r["default"].getWidth(),this.h=r["default"].getHeight()},process:function(e){var t=e.height,n=e.width;if(n!==this.w||t!==this.h)return this.h=t,this.w=n,{width:n,height:t}}}));n.resize=c;var p=l.pipe(new o["default"]({init:function(){this.scrollTop=r["default"].getScrollTop(),this.scrollLeft=r["default"].getScrollLeft()},process:function(e){var t=e.scrollTop,n=e.scrollLeft;if(e.phase===s.RAFPhase.MEASURE&&(t!==this.scrollTop||n!==this.scrollLeft))return this.scrollTop=t,this.scrollLeft=n,{timestamp:e.timestamp,newScrollTop:t,newScrollLeft:n}}}));n.scroll=p},{"./../interfaces":2,"./../window-proxy":8,"./frame":5,"./stream":6}],8:[function(e,t,n){"use strict";function i(){var e="undefined"!=typeof document.scrollingElement;u.getScrollTop=e?function(){return document.scrollingElement.scrollTop}:function(){return window.scrollY},u.getScrollLeft=e?function(){return document.scrollingElement.scrollLeft}:function(){return window.scrollX},u.getHeight=function(){return window.innerHeight},u.getWidth=function(){return window.innerWidth}}var o=function(){return 0},r=!("undefined"==typeof window||!window||"undefined"==typeof document||!document),u={hasDOM:r,getScrollTop:o,getScrollLeft:o,getHeight:o,getWidth:o,rAF:r&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(){}};r&&("loading"!==document.readyState?i():document.addEventListener("DOMContentLoaded",i)),Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=u},{}]},{},[1])(1)});