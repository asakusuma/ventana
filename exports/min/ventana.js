!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.ventana=e()}}(function(){return function e(t,n,r){function o(u,s){if(!n[u]){if(!t[u]){var a="function"==typeof require&&require;if(!s&&a)return a(u,!0);if(i)return i(u,!0);var l=new Error("Cannot find module '"+u+"'");throw l.code="MODULE_NOT_FOUND",l}var f=n[u]={exports:{}};t[u][0].call(f.exports,function(e){var n=t[u][1][e];return o(n?n:e)},f,f.exports,e,t,n,r)}return n[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(e,t,n){"use strict";function r(e,t){d[e].push({callback:t,id:null})}function o(e){v.push({callback:e,id:null})}var i=e("./window-proxy"),u=e("./streams/streams");n.RAFStream=u.raf;var s=e("./queues/element");n.QueueElement=s["default"];var a=e("./streams/frame");n.Frame=a["default"];var l=e("./queues/queue");n.Queue=l["default"];var f=e("./queues/queue"),p=e("./streams/stream"),c=e("./streams/stream");n.Stream=c["default"];var d={move:new f["default"]("move"),resize:new f["default"]("resize"),destroy:new f["default"]("destroy"),hide:new f["default"]("hide"),show:new f["default"]("show")},h=new p["default"],w=new p["default"],m=new p["default"],v=new f["default"]("tasks"),y=function(e,t){return t.callback},g=new p.Terminal(function(e){return e()});h.pipe(new p["default"]({queue:d.hide,process:y})).pipe(g),m.pipe(new p["default"]({queue:d.destroy,process:y})).pipe(g),w.pipe(new p["default"]({queue:d.show,process:y})).pipe(g),u.scroll.pipe(new p["default"]({queue:d.move,process:y})).pipe(g),u.resize.pipe(new p["default"]({queue:d.resize,process:y})).pipe(g),u.poll.pipe(new p["default"]({consume:!0,queue:v,process:y})).pipe(g),i["default"].hasDOM&&(window.addEventListener("unload",m.write),document.addEventListener("visibilitychange",function(){"visible"===document.visibilityState?w.write(Date.now()):h.write(Date.now())})),n.on=r,n.queue=o},{"./queues/element":3,"./queues/queue":4,"./streams/frame":5,"./streams/stream":6,"./streams/streams":7,"./window-proxy":8}],2:[function(e,t,n){"use strict";!function(e){e[e.MEASURE=0]="MEASURE",e[e.MUTATE=1]="MUTATE"}(n.RAFPhase||(n.RAFPhase={}));n.RAFPhase},{}],3:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=function(){function e(){}return e}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o;var i=function(e){function t(){e.apply(this,arguments)}return r(t,e),t}(o);n.QueueDOMElement=i},{}],4:[function(e,t,n){"use strict";var r=e("../streams/stream"),o=function(){function e(e){this.populateCallbacks=[],this.name=e,this.items=[],this.stream=new r["default"]}return e.prototype.remove=function(e){var t;t="string"==typeof e?function(t){return t.id===e}:function(t){return t.el===e};for(var n=this.items.length,r=0;r<n;r++)t(this.items[r])&&(this.items.splice(r,1),r--,n--)},e.prototype.clear=function(){this.items=[]},e.prototype.push=function(e){0===this.items.length&&this.populateCallbacks.forEach(function(e){return e()}),this.items.push(e)},e.prototype.toStream=function(){return this.stream},e.prototype.callOnPopulate=function(e){this.populateCallbacks.push(e)},e}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o},{"../streams/stream":6}],5:[function(e,t,n){"use strict";var r=e("./../interfaces"),o=function(){function e(){}return e.prototype.isMeasure=function(){return this.phase===r.RAFPhase.MEASURE},e}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o},{"./../interfaces":2}],6:[function(e,t,n){"use strict";var r=function(){function e(e){var t=this;void 0===e&&(e={}),this.targets=[],this.refCount=0,this.populateCallbacks=[],this.options=e,this._process=e.process||function(e){return e},e.queue&&e.queue.callOnPopulate(function(){t.onPopulate()})}return e.prototype.process=function(e,t){return this._process.call(this,e,t)},e.prototype.handleQueue=function(e,t){var n=this;this.targets.forEach(function(r){var o=n.process(e,t);o&&r.write(o)})},e.prototype.write=function(e){var t=this;if(this.options.queue)if(this.options.consume)for(;this.options.queue.items.length>0;)this.handleQueue(e,this.options.queue.items.pop());else this.options.queue.items.forEach(function(n){return t.handleQueue(e,n)});else(e=this.process(e))&&this.targets.forEach(function(t){t.write(e)})},e.prototype.onPopulate=function(){this.refCount<1&&this.options.init&&this.options.init.call(this),this.populateCallbacks.forEach(function(e){return e()}),this.refCount++},e.prototype.pipe=function(e){var t=this;return this.targets.push(e),this.options.queue||e.callOnPopulate(function(){t.onPopulate()}),e},e.prototype.callOnPopulate=function(e){this.populateCallbacks.push(e)},e}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r;var o=function(){function e(e){this.targets=[],this.terminal=e}return e.prototype.write=function(e){var t=this.terminal(e);this.targets.forEach(function(e){e.write(t)})},e.prototype.pipe=function(e){return this.targets.push(e),e},e.prototype.callOnPopulate=function(e){e()},e}();n.Terminal=o},{}],7:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=e("./stream"),i=e("./../window-proxy"),u=e("./frame"),s=e("./../interfaces"),a=(function(e){function t(){e.apply(this,arguments)}return r(t,e),t.prototype.write=function(t){var n=new u["default"];n.timestamp=t,n.phase=s.RAFPhase.MEASURE,n.scrollTop=i["default"].getScrollTop(),n.scrollLeft=i["default"].getScrollLeft(),n.width=i["default"].getWidth(),n.height=i["default"].getHeight(),e.prototype.write.call(this,n),n.phase=s.RAFPhase.MUTATE,e.prototype.write.call(this,n)},t}(o["default"]),new o["default"]({init:function(){var e=this,t=function(){e.write(Date.now()),i["default"].rAF(t)};i["default"].rAF(t)},process:function(e){if("number"==typeof e){var t=new u["default"];return t.timestamp=e,t.phase=s.RAFPhase.MEASURE,t.scrollTop=i["default"].getScrollTop(),t.scrollLeft=i["default"].getScrollLeft(),t.width=i["default"].getWidth(),t.height=i["default"].getHeight(),this.write(t),t.phase=s.RAFPhase.MUTATE,t}return e}}));n.raf=a;var l=a.pipe(new o["default"]({process:function(e){if(e.phase===s.RAFPhase.MEASURE)return e}}));n.measure=l;var f=a.pipe(new o["default"]({process:function(e){if(e.phase!==s.RAFPhase.MEASURE)return e}}));n.poll=f;var p=-1,c=-1,d=l.pipe(new o["default"]({process:function(e){var t=e.height,n=e.width;if(n!==p||t!==c)return c=t,p=n,{width:p,height:c}}}));n.resize=d;var h=-1,w=-1,m=l.pipe(new o["default"]({process:function(e){var t=e.scrollTop,n=e.scrollLeft;if(e.phase===s.RAFPhase.MEASURE&&(t!==h||n!==w))return h=t,w=n,{timestamp:e.timestamp,scrollTop:h,scrollLeft:w}}}));n.scroll=m},{"./../interfaces":2,"./../window-proxy":8,"./frame":5,"./stream":6}],8:[function(e,t,n){"use strict";function r(){var e="undefined"!=typeof document.scrollingElement;u.getScrollTop=e?function(){return document.scrollingElement.scrollTop}:function(){return window.scrollY},u.getScrollLeft=e?function(){return document.scrollingElement.scrollLeft}:function(){return window.scrollX},u.getHeight=function(){return window.innerHeight},u.getWidth=function(){return window.innerWidth}}var o=function(){return 0},i=!("undefined"==typeof window||!window||"undefined"==typeof document||!document),u={hasDOM:i,getScrollTop:o,getScrollLeft:o,getHeight:o,getWidth:o,rAF:i&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(){}};i&&("loading"!==document.readyState?r():document.addEventListener("DOMContentLoaded",r)),Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=u},{}]},{},[1])(1)});