!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.ventana=e()}}(function(){return function e(t,n,r){function i(u,s){if(!n[u]){if(!t[u]){var a="function"==typeof require&&require;if(!s&&a)return a(u,!0);if(o)return o(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var c=n[u]={exports:{}};t[u][0].call(c.exports,function(e){var n=t[u][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[u].exports}for(var o="function"==typeof require&&require,u=0;u<r.length;u++)i(r[u]);return i}({1:[function(e,t,n){"use strict";function r(e,t){d[e].push({callback:t,id:null})}function i(e){v.push({callback:e,id:null})}var o=e("./window-proxy"),u=e("./streams/streams");n.RAFStream=u.raf;var s=e("./queues/element");n.QueueElement=s["default"];var a=e("./streams/frame");n.Frame=a["default"];var f=e("./queues/queue");n.Queue=f["default"];var c=e("./queues/queue"),l=e("./streams/stream"),p=e("./streams/stream");n.Stream=p["default"];var d={move:new c["default"]("move"),resize:new c["default"]("resize"),destroy:new c["default"]("destroy"),hide:new c["default"]("hide"),show:new c["default"]("show")},h=new l["default"],w=new l["default"],m=new l["default"],v=new c["default"]("tasks"),y=function(e,t){return t.callback},g=new l.Terminal(function(e){return e()});h.pipe(new l["default"]({queue:d.hide,process:y})).pipe(g),m.pipe(new l["default"]({queue:d.destroy,process:y})).pipe(g),w.pipe(new l["default"]({queue:d.show,process:y})).pipe(g),u.scroll.pipe(new l["default"]({queue:d.move,process:y})).pipe(g),u.resize.pipe(new l["default"]({queue:d.resize,process:y})).pipe(g),u.poll.pipe(new l["default"]({consume:!0,queue:v,process:y})).pipe(g),o["default"].hasDOM&&(window.addEventListener("unload",m.write),document.addEventListener("visibilitychange",function(){"visible"===document.visibilityState?w.write(Date.now()):h.write(Date.now())})),n.on=r,n.queue=i},{"./queues/element":3,"./queues/queue":4,"./streams/frame":5,"./streams/stream":6,"./streams/streams":7,"./window-proxy":8}],2:[function(e,t,n){"use strict";!function(e){e[e.MEASURE=0]="MEASURE",e[e.MUTATE=1]="MUTATE"}(n.RAFPhase||(n.RAFPhase={}));n.RAFPhase},{}],3:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(){function e(){}return e}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=i;var o=function(e){function t(){e.apply(this,arguments)}return r(t,e),t}(i);n.QueueDOMElement=o},{}],4:[function(e,t,n){"use strict";var r=e("../streams/stream"),i=function(){function e(e){this.name=e,this.items=[],this.stream=new r["default"]}return e.prototype.remove=function(e){var t;t="string"==typeof e?function(t){return t.id===e}:function(t){return t.el===e};for(var n=this.items.length,r=0;r<n;r++)t(this.items[r])&&(this.items.splice(r,1),r--,n--)},e.prototype.clear=function(){this.items=[]},e.prototype.push=function(e){this.items.push(e)},e.prototype.toStream=function(){return this.stream},e}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=i},{"../streams/stream":6}],5:[function(e,t,n){"use strict";var r=e("./../interfaces"),i=function(){function e(){}return e.prototype.isMeasure=function(){return this.phase===r.RAFPhase.MEASURE},e}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=i},{"./../interfaces":2}],6:[function(e,t,n){"use strict";var r=function(){function e(e){void 0===e&&(e={}),this.targets=[],this.options=e,this._process=e.process||function(e){return e},e.init&&e.init.call(this)}return e.prototype.process=function(e,t){return this._process.call(this,e,t)},e.prototype.handleQueue=function(e,t){var n=this;this.targets.forEach(function(r){var i=n.process(e,t);i&&r.write(i)})},e.prototype.write=function(e){var t=this;if(this.options.queue)if(this.options.consume)for(;this.options.queue.items.length>0;)this.handleQueue(e,this.options.queue.items.pop());else this.options.queue.items.forEach(function(n){return t.handleQueue(e,n)});else(e=this.process(e))&&this.targets.forEach(function(t){t.write(e)})},e.prototype.pipe=function(e){return this.targets.push(e),e},e}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r;var i=function(){function e(e){this.targets=[],this.terminal=e}return e.prototype.write=function(e){var t=this.terminal(e);this.targets.forEach(function(e){e.write(t)})},e.prototype.pipe=function(e){return this.targets.push(e),e},e}();n.Terminal=i},{}],7:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("./stream"),o=e("./../window-proxy"),u=e("./frame"),s=e("./../interfaces"),a=(function(e){function t(){e.apply(this,arguments)}return r(t,e),t.prototype.write=function(t){var n=new u["default"];n.timestamp=t,n.phase=s.RAFPhase.MEASURE,n.scrollTop=o["default"].getScrollTop(),n.scrollLeft=o["default"].getScrollLeft(),n.width=o["default"].getWidth(),n.height=o["default"].getHeight(),e.prototype.write.call(this,n),n.phase=s.RAFPhase.MUTATE,e.prototype.write.call(this,n)},t}(i["default"]),new i["default"]({init:function(){var e=this,t=function(){e.write(Date.now()),o["default"].rAF(t)};o["default"].rAF(t)},process:function(e){if("number"==typeof e){var t=new u["default"];return t.timestamp=e,t.phase=s.RAFPhase.MEASURE,t.scrollTop=o["default"].getScrollTop(),t.scrollLeft=o["default"].getScrollLeft(),t.width=o["default"].getWidth(),t.height=o["default"].getHeight(),this.write(t),t.phase=s.RAFPhase.MUTATE,t}return e}}));n.raf=a;var f=a.pipe(new i["default"]({process:function(e){if(e.phase===s.RAFPhase.MEASURE)return e}}));n.measure=f;var c=a.pipe(new i["default"]({process:function(e){if(e.phase!==s.RAFPhase.MEASURE)return e}}));n.poll=c;var l=-1,p=-1,d=f.pipe(new i["default"]({process:function(e){var t=e.height,n=e.width;if(n!==l||t!==p)return p=t,l=n,{width:l,height:p}}}));n.resize=d;var h=-1,w=-1,m=f.pipe(new i["default"]({process:function(e){var t=e.scrollTop,n=e.scrollLeft;if(e.phase===s.RAFPhase.MEASURE&&(t!==h||n!==w))return h=t,w=n,{timestamp:e.timestamp,scrollTop:h,scrollLeft:w}}}));n.scroll=m},{"./../interfaces":2,"./../window-proxy":8,"./frame":5,"./stream":6}],8:[function(e,t,n){"use strict";function r(){var e="undefined"!=typeof document.scrollingElement;u.getScrollTop=e?function(){return document.scrollingElement.scrollTop}:function(){return window.scrollY},u.getScrollLeft=e?function(){return document.scrollingElement.scrollLeft}:function(){return window.scrollX},u.getHeight=function(){return window.innerHeight},u.getWidth=function(){return window.innerWidth}}var i=function(){return 0},o=!("undefined"==typeof window||!window||"undefined"==typeof document||!document),u={hasDOM:o,getScrollTop:i,getScrollLeft:i,getHeight:i,getWidth:i,rAF:o&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(){}};o&&("loading"!==document.readyState?r():document.addEventListener("DOMContentLoaded",r)),Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=u},{}]},{},[1])(1)});